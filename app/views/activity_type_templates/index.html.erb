<div class="row mb-3">
  <div class="col-lg-8 offset-lg-2">
    <h5 class="text-info text-uppercase">
      Manage Property Activity Types
    </h5>
    <hr>
  </div>
</div>

<div class="row mb-2">
  <div class="col-lg-8 offset-lg-2">

    <div class="text-center font-weight-light">
    This allows you to customize what fields are shown for your activity types. 
    To enable a field, toggle that field to "Show" in the specific actitivity type.
    In order to delete a type there must not be any activities associated with that type.
    </div>
    <hr>

  </div>
</div>

<div class="row mb-3">
  <div class="col-md-8 offset-md-2">


    <div class="accordion" id="accordionExample">
      <% current_user.activity_types.order(created_at: :desc).each do |type| %>

        <form action="/update_activity_type/<%= type.id %>" method="post">
          <div class="card bg-white border-white">
            <div class="card-header bg-white " id="heading<%= type.id %>">
              <h2 class="mb-0">
                <button class="btn btn-outline-info btn-block" type="button" data-toggle="collapse" data-target="#collapse<%= type.id %>" aria-expanded="true" aria-controls="collapse<%= type.id %>">
                  <%= type.title %>
                </button>
              </h2>
            </div>

            <div id="collapse<%= type.id %>" class="collapse" aria-labelledby="heading<%= type.id %>" data-parent="#accordionExample">
              <div class="card-body">

                <div class="row mb-2">
                  <div class="col-6">
                    <div class="form-group">
                      <label for="title">
                        Title
                      </label>
                      <input type="text" id="title" name="title" class="form-control" value="<%= type.title %>">
                    </div>
                  </div>
                  <div class="col-6">

                    <% if type.activities.count == 0 %>

                      <div><br>
                      </div>
                      <a href="/delete_activity_type/<%= type.id %>/">
                        <button type="button" class="btn btn-outline-danger btn-block mt-2 text-uppercase">Delete</button>
                      </a>

                    <% else %>
                      <div><br>
                      </div>
                      <a href="/delete_activity_type/<%= type.id %>/">
                        <button type="button" class="btn btn-outline-secondary btn-block mt-2 text-uppercase" disabled>Delete</button>
                      </a>
                    <% end %>
                  </div>
                </div>

                <div class = "row mb-2">
                  <div class="form-group">
                    <input type="hidden" name="user_id" class="form-control" value="<%= current_user.id %>">
                  </div>

                  <div class="col-lg-3 col-6 col-sm-6">
                    Subject
                    <%= select_tag(:subject_toggle, options_for_select(["Show", "Hide"], type.subject_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Contact
                    <%= select_tag(:contact_toggle, options_for_select(["Show", "Hide"], type.contact_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Duration
                    <%= select_tag(:duration_toggle, options_for_select(["Show", "Hide"], type.duration_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Cost
                    <%= select_tag(:cost_toggle, options_for_select(["Show", "Hide"], type.cost_toggle), :class => "form-control") %>
                  </div>
                </div>
                
                <div class = "row mb-2">
                  <div class="col-lg-3 col-6 col-sm-6">
                    Details
                    <%= select_tag(:detail_toggle, options_for_select(["Show", "Hide"], type.detail_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Outcome
                    <%= select_tag(:outcome_toggle, options_for_select(["Show", "Hide"], type.outcome_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Agent
                    <%= select_tag(:agent_toggle, options_for_select(["Show", "Hide"], type.agent_toggle), :class => "form-control") %>
                  </div>
                  <div class="col-lg-3 col-6 col-sm-6">
                    Customer
                    <%= select_tag(:customer_toggle, options_for_select(["Show", "Hide"], type.customer_toggle), :class => "form-control") %>
                  </div>
                </div>
                <div class = "row mb-2">
                  <!--<div class="col-lg-3 offset-lg-3 col-6 col-sm-6">-->
                  <!--  Flyer Image-->
                  <!--   select_tag(:flyer_img_toggle, options_for_select(["Show", "Hide"], type.flyer_img_toggle), :class => "form-control") %>-->
                  <!--</div>-->
                  <div class="form-group">
                   <input type="hidden" name="flyer_img_toggle" class="form-control" value="Hide">
                 </div>
                  <!--<div class="col-lg-3 col-6 col-sm-6">-->
                  <!--  Postcard Image-->
                  <!--   select_tag(:postcard_img_toggle, options_for_select(["Show", "Hide"], type.postcard_img_toggle), :class => "form-control") %>-->
                  <!--</div>-->
              <div class="form-group">
                <input type="hidden" name="postcard_img_toggle" class="form-control" value="Hide">
              </div>
                </div>

                <button class="btn btn-block btn-outline-success">
                  Save
                </button>
              </div>

            </div>
          </div>

        </form>

      <% end %>

    </div>

  </div>
</div>

<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <a href="/activity_types/new" class="btn btn-block btn-outline-secondary">
      Add a new activity type
    </a>
  </div>
</div>
